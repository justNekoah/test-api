<!DOCTYPE html>
<html>
<body>
    <h1>测试读取私有仓库信息</h1>
    <p>结果：<span id="result">正在加载...</span></p>

    <script>
        // 尝试列出一个用户的所有仓库（包括私有仓库）
        // 这个请求需要授权，但我们不提供 token
        fetch('https://api.github.com/user/repos?visibility=private', {
            headers: {
                // 注意：这里没有 Authorization 头
            }
        })
        .then(response => {
            document.getElementById('result').textContent = '状态码: ' + response.status;
            return response.json();
        })
        .then(data => {
            if (data.message) {
                document.getElementById('result').textContent += ' | 错误: ' + data.message;
            } else {
                document.getElementById('result').textContent += ' | 仓库数: ' + data.length;
            }
        })
        .catch(error => {
            document.getElementById('result').textContent = '请求失败: ' + error;
        });
    </script>
</body>
</html>